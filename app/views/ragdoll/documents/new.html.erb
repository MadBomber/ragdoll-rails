<h1>Add New Document</h1>

<div class="container">
  <div class="row">
    <div class="col-md-8">
      <div class="card">
        <div class="card-header">
          <h3>Upload Files</h3>
        </div>
        <div class="card-body">
          <%= form_with model: [@document], url: ragdoll.documents_path, local: true, multipart: true do |form| %>
            <div class="mb-3">
              <label class="form-label">Select Files</label>
              <%= form.file_field :files, multiple: true, class: "form-control", accept: ".pdf,.txt,.docx,.doc,.md,.csv" %>
            </div>
            
            <div class="d-grid">
              <%= form.submit "Upload Documents", class: "btn btn-primary" %>
            </div>
          <% end %>
        </div>
      </div>

      <div class="card mt-4">
        <div class="card-header">
          <h3>Add Text Content</h3>
        </div>
        <div class="card-body">
          <%= form_with model: [@document], url: ragdoll.documents_path, local: true do |form| %>
            <div class="mb-3">
              <label class="form-label">Title</label>
              <%= form.text_field :title, class: "form-control", placeholder: "Enter document title" %>
            </div>

            <div class="mb-3">
              <label class="form-label">Content</label>
              <%= form.text_area :text_content, class: "form-control", rows: 10, placeholder: "Enter text content..." %>
            </div>

            <div class="d-grid">
              <%= form.submit "Add Text Document", class: "btn btn-success" %>
            </div>
          <% end %>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card">
        <div class="card-header">
          <h5>Upload Tips</h5>
        </div>
        <div class="card-body">
          <ul class="small">
            <li>Supported formats: PDF, Word docs, text files, markdown, CSV</li>
            <li>Select multiple files for batch processing</li>
            <li>Processing happens in the background</li>
            <li>Documents are automatically indexed for search</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

<% if @document&.errors&.any? %>
  <div class="alert alert-danger mt-3">
    <h5>Errors:</h5>
    <ul class="mb-0">
      <% @document.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
    </ul>
  </div>
<% end %>